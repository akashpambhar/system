<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand">Advance Student Report System</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item m-2">
          <a class="nav-link" routerLinkActive="active" routerLink="/report">Student Report</a>
        </li>
        <li class="nav-item">
          <a class="nav-link btn btn-danger m-2" (click)="logout()">Logout</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-5">
  <h2>School Average</h2>
  <div class="table-container">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>School Name</th>
          <th>School Average</th>
          <th *ngFor="let subject of schoolAverages[0]?.subjectAverage | keyvalue">
            {{ subject.key }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let school of schoolAverages">
          <td>{{ school.schoolName }}</td>
          <td>{{ school.schoolAverage }}</td>
          <td *ngFor="let subject of school.subjectAverage | keyvalue">
            {{ subject.value }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="container mt-5">
  <h2>Students</h2>
  <div class="table-container">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Student Name</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let student of students">
          <td>{{ student.id }}</td>
          <td>{{ student.studentName }}</td>
          <td>
            <!-- Nested table for marks -->
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Subject</th>
                  <th>Marks</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let mark of student.marks">
                  <td>{{ mark.subjectName }}</td>
                  <td>{{ mark.marks }}</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="container mt-5">
  <h2>Class Wise Topper</h2>
  <div class="table-container">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Class</th>
          <th>Student ID</th>
          <th>School Name</th>
          <th>Session</th>
          <th>Student Name</th>
          <th>Marks</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let classKey of topperClasses">
          <tr>
            <td>{{ classKey }}</td>
            <td>{{ toppers[classKey].id }}</td>
            <td>{{ toppers[classKey].schoolName }}</td>
            <td>{{ toppers[classKey].session }}</td>
            <td>{{ toppers[classKey].studentName }}</td>
            <td>
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>Subject</th>
                    <th>Marks</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let mark of toppers[classKey].marks">
                    <td>{{ mark.subjectName }}</td>
                    <td>{{ mark.marks }}</td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>